<!DOCTYPE HTML>
<html lang="en">
<head>
  <title>OO, Variance, Type Safety</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=792, user-scalable=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <link href="https://fonts.googleapis.com/css?family=Roboto+Slab|Oxygen+Mono" rel="stylesheet" type="text/css">
  <link href="../asset/screen.css" rel="stylesheet" type="text/css">
</head>
<body class="list">
  <header class="caption"></header>

<section class="slide shout"><div>
  <h2>OO, Variance, Type Safety</h2>
  <br><br><br><br><br><br><br><br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  <a href="http://godfat.org/slide/2013-11-07-variance/">http://godfat.org/slide/2013-11-07-variance/</a></span>
</div></section>

<section class="slide shout"><div>
<h2>Variance?</h2>
</div></section>

<section class="slide shout"><div>
<h2>Wikipedia says...</h2>
</div></section>

<section class="slide"><div>
  Within the type system of a programming language, a typing rule or a type constructor is:<br><br>
  <ul><li><em>covariant</em><span class="next"> if it preserves the <a href="http://en.wikipedia.org/wiki/Subtyping">ordering, â‰¤, of types</a>, which orders types from more specific to more generic;</span></li>
  <li><em>contravariant</em><span class="next"> if it reverses this ordering;</span></li>
  <li><em>invariant</em> <span  class="next">if neither of these applies.</span></li></ul>
</div></section>

<section class="slide shout"><div>
<h2>Subtype?</h2>
</div></section>

<section class="slide shout"><div>
<h2>Wikipedia says...</h2>
</div></section>

<section class="slide"><div>
  <br><br><br>...typically subroutines or functions, written to operate on elements of the <em>supertype</em> can also operate on elements of the <em>subtype</em>.
</div></section>

<section class="slide shout"><div>
<h2>Covariant Return Type</h2>
</div></section>

<section class="slide"><div>
<h2>Given base class and <em>self</em>:</h2>
<pre><code class="scala">
class Animal              {
  def self: Animal = this }
</code></pre>
<span class="next">
<h2><em>self</em> could be overridden with:</h2>
<pre><code class="scala">
class Cat extends Animal  {
  override
  def self:    Cat = this }
</code></pre></span>
</div></section>

<section class="slide"><div>
<h2>It is safe as you can see...</h2>
<pre><code class="scala">
val animal: Animal = (new Cat).self</code></pre>
<span class="next">
<h2>And this works...</h2>
<pre><code class="scala">
val    cat:    Cat = (new Cat).self</code></pre></span>
</div></section>

<section class="slide shout"><div>
<h2>Contravariant Argument Type</h2>
</div></section>

<section class="slide"><div>
<h2>This is <em>not allowed</em> in Scala and most languages:</h2>
<pre><code class="scala">
class Animal                       {
  def eat(food: Animal): Unit = () }
</code></pre>
<pre class="next"><code class="scala">
class Cat extends Animal           {
  override // Error: override nothing
  def eat(food: Object): Unit = () }</code></pre>
</div></section>

<section class="slide"><div>
<h2>Shall be safe as we ask less tho.</h2>
<span class="next">
<h2>Maybe it's just useless:</h2>
<pre><code class="scala">
(new Cat).eat(new Object)
</code></pre></span>
<span class="next"><h2>If we have more, why ask less?</h2></span>
<span class="next"><h2>Type safety, maybe.</h2></span>
</div></section>

<section class="slide"><div>
<h2>Mnemonic:<h2/>
<h2 class="next"><br><br>
<span style="text-decoration: underline">Return</span> <em>more</em> when asked;<br><span style="text-decoration: underline">Take</span> <em>less</em> when given.</h2>
</div></section>

<section class="slide"><div>
Is Cat An Animal?
-T -> +R
Java is not safe
</div></section>

<section class="slide"><div>
  http://lambda-the-ultimate.org/node/4377#comment-67603
  http://en.wikipedia.org/wiki/Covariance_and_contravariance_%28computer_science%29
</div></section>

<section class="slide shout"><div>
  <h2>Q?</h2>
</div></section>

  <div class="progress"><div></div></div>
  <script src='../asset/highlight.pack.js' type='text/javascript'></script>
  <script>hljs.initHighlightingOnLoad();</script>
  <script src="../asset/shower.min.js"></script>
</body>
</html>
