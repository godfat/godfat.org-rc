<!DOCTYPE HTML>
<html lang="en">
<head>
  <title>Small Ruby Talk</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=792, user-scalable=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <link href="http://fonts.googleapis.com/css?family=Roboto+Slab|Oxygen+Mono" rel="stylesheet" type="text/css">
  <link href="screen.css" rel="stylesheet" type="text/css">
</head>
<body class="list">
  <header class="caption"></header>

<section class="slide shout"><div>
  <h2>Small<br/><img src="http://upload.wikimedia.org/wikipedia/commons/7/73/Ruby_logo.svg" alt="Ruby"> Talk</h2>
</div></section>

<section class="slide shout"><div>
  <h2>Lisp <em>+</em> Smalltalk</h2>
</div></section>

<section class="slide shout"><div>
  <h2>Lisp: <em>Everything</em> is an expression</h2>
</div></section>

<section class="slide"><div>
  <h2>The followings are <em>expressions</em>:</h2>
  <ul>
    <li>Class definition</li>
    <li class="next">Method definition</li>
    <li class="next">if statement</li>
  </ul>
</div></section>

<section class="slide"><div>
  <h2>The followings are <em>expressions</em>:</h2>
  <ul>
    <li>Class definition</li>
    <li>Method definition</li>
    <li>if <em><span style="text-decoration: line-through">statement</span></em> expression</li>
  </ul>
</div></section>

<section class="slide"><div>
  <h2><em>Valid</em>, but don't do this:</h2>
  <pre><code class="ruby">
p(if (class C; self; end)
  def f a=(def g a; 'g'; end)
    g a
  end
  g f
end) # => 'g'</code></pre>
</div></section>

<section class="slide shout"><div>
  <h2>Smalltalk: <em>Everything</em> is an object</h2>
</div></section>

<section class="slide"><div>
  <h2>The followings are <em>objects</em>:</h2>
  <ul>
    <li>Class</li>
    <li class="next">Method</li>
    <li class="next">TOPLEVEL_BINDING</li>
  </ul>
</div></section>

<section class="slide"><div>
  <h2>There's more than one<br> way to do it (perlish)</h2>
  <pre><code class="ruby">
Object.instance_method(:p).bind(self).call(self)
# => main</code></pre>
  <span class="next"><h2>Equivalent to:</h2>
    <pre><code>
p self # => main</code></pre></span>
</div></section>

<section class="slide"><div>
  <h2>Today's Topics:</h2>
  <ul>
    <li>Type System</li>
    <ul>
      <li class="next">Static Typing vs Dynamic Typing</li>
      <li class="next">Strong or Weak? Coercion?</li>
    </ul>
    <li class="next">Runtime System (object model)</li>
    <ul>
      <li class="next">Object is an Object itself</li>
      <li class="next">Singleton Pattern? Class?</li>
    </ul>
    <li class="next"><a href="https://github.com/godfat/muack">Muack</a> -- Yet Another Mocking Library</li>
  </ul>
</div></section>

<section class="slide"><div>
  <h2>Today's Topics:</h2>
  <ul>
    <li>Type System</li>
    <ul>
      <li><em>Static Typing vs Dynamic Typing</em></li>
      <li>Strong or Weak? Coercion?</li>
    </ul>
    <li>Runtime System (object model)</li>
    <ul>
      <li>Object is an Object itself</li>
      <li>Singleton Pattern? Class?</li>
    </ul>
    <li><a href="https://github.com/godfat/muack">Muack</a> -- Yet Another Mocking Library</li>
  </ul>
</div></section>

<section class="slide"><div>
  <h2>Static Typing vs<br>Dynamic Typing</h2>
  <ul>
    <li>They are not conflicting</li>
    <li class="next">
      Think of DT as "<em>unityped</em>" in ST
      <ul><li>ref: <a href="http://existentialtype.wordpress.com/2011/03/19/dynamic-languages-are-static-languages/">Dynamic languages are static languages</a></li></ul></li>
    <li class="next">Downcasting is dynamic type checking</li>
  </ul>
</div></section>

<section class="slide"><div>
  <h2>Extracted from <em>gson</em></h2>
  <pre><code class="java">
@SuppressWarnings("unchecked")
public &lt;T&gt; T fromJson(String json, Type typeOfT) throws JsonSyntaxException {
  if (json == null) {
    return null;
  }
  StringReader reader = new StringReader(json);
  T target = <em>(T)</em> fromJson(reader, typeOfT);
  return target;
}</code></pre>
</div></section>

<section class="slide"><div>
  <h2>Duck Typing</h2>
  <pre><code class="ruby">
Duck.new.walk</code></pre>
  <span class="next"><h2>Could be thought as:</h2>
  <pre><code class="java">
Object duck = new Duck();
if(duck.<em>isRespondingTo</em>("walk"))
    duck.dispatch("walk");
else
    throw new NoMethodError(duck, "walk");</code></pre></span>
</div></section>

<section class="slide"><div>
  <h2>Today's Topics:</h2>
  <ul>
    <li>Type System</li>
    <ul>
      <li>Static Typing vs Dynamic Typing</li>
      <li><em>Strong or Weak? Coercion?</em></li>
    </ul>
    <li>Runtime System (object model)</li>
    <ul>
      <li>Object is an Object itself</li>
      <li>Singleton Pattern? Class?</li>
    </ul>
    <li><a href="https://github.com/godfat/muack">Muack</a> -- Yet Another Mocking Library</li>
  </ul>
</div></section>

<section class="slide"><div>
  <h2>Strong or Weak? Coercion?</h2>
  <ul>
    <li>Vague terms</li>
    <li class="next">It's not about static typing or dynamic typing</li>
    <li class="next">Sometimes it means implicit type coercion</li>
  </ul>
</div></section>

<section class="slide"><div>
  <h2>Perl Type Coercion</h2>
  <pre><code>
'1' +  1  <span class="next">#   2</span>
 <span class="next">1  . '1' # '11'</span></code></pre>
  <span class="next"><h2>JavaScript Type <em>Nonsense</em></h2>
  <pre><code>
'1' +  1     <span class="next">// '11'</span>
 <span class="next">1  + '1'</span>    <span class="next">// '11'</span>
 <span class="next">true + true</span> <span class="next">//   2</span>
 <span class="next">true + []</span>   <span class="next">// 'true'</span></code></pre></span>
</div></section>

<section class="slide"><div>
  <h2><em>More</em><br> JavaScript Type <em>Nonsense</em></h2>
  ref: <a href="http://ckknight.github.io/gorillascript/">GorillaScript</a>
  <pre><code>
true + null      // 1
true + <em>undefined</em> // NaN
true + {}        // 'true[object Object]'
new Date(0) + 0  // 'Thu Jan 01 1970 08:00:00 GMT+0800 (CST)0'
new Date(0) - 0  // 0
</code></pre>
</div></section>

<section class="slide shout"><div>
  <h2><em>ლ(ಠ益ಠ╬)ლ</em></h2>
</div></section>

<section class="slide"><div>
  <h2>Today's Topics:</h2>
  <ul>
    <li>Type System</li>
    <ul>
      <li>Static Typing vs Dynamic Typing</li>
      <li>Strong or Weak? Coercion?</li>
    </ul>
    <li>Runtime System (object model)</li>
    <ul>
      <li><em>Object is an Object itself</em></li>
      <li>Singleton Pattern? Class?</li>
    </ul>
    <li><a href="https://github.com/godfat/muack">Muack</a> -- Yet Another Mocking Library</li>
  </ul>
</div></section>

<section class="slide"><div>
  <h2>Object is an Object itself?</h2>
  Ruby:
  <pre><code class="ruby">
Object.kind_of?(Object)   # true</code></pre>
  Java:
  <pre><code class="java">
Object instanceof Object // ?</code></pre>
</div></section>

<section class="slide"><div>
  <h2>If A is a kind of B...<br>B must either be:</h2>
<pre><code class="ruby">
<span class="next">#    A's class
     B ==      A.class</span>
<span class="next"># or A's class' superclass
     B ==      A.class.superclass</span>
<span class="next"># or A's class' superclass' superclass
     B ==      A.class.superclass.superclass</span>
<span class="next"># or A's class' superclass' superclass' superclass
     B ==      A.class.superclass.superclass.superclass
# ...</span></code></pre>
</div></section>

<section class="slide"><div>
  <h2>Assume A and B<br>are both Objects...</h2>
<pre><code class="ruby">
#    A's class
     B ==      A.class
# or A's class' superclass
     B ==      A.class.superclass
# or A's class' superclass' superclass
     B ==      A.class.superclass.superclass
# or A's class' superclass' superclass' superclass
     B ==      A.class.superclass.superclass.superclass
# ...</code></pre>
</div></section>

<section class="slide"><div>
  <h2>Assume A and B<br>are both Objects...</h2>
<pre><code class="ruby">
# =>      v Class
Object == Object.class
# or A's class' superclass
     B ==      A.class.superclass
# or A's class' superclass' superclass
     B ==      A.class.superclass.superclass
# or A's class' superclass' superclass' superclass
     B ==      A.class.superclass.superclass.superclass
# ...</code></pre>
</div></section>

<section class="slide"><div>
  <h2>Assume A and B<br>are both Objects...</h2>
<pre><code class="ruby">
# =>      v Class
Object == Object.class
# =>      v Module
Object == Object.class.superclass
# or A's class' superclass' superclass
     B ==      A.class.superclass.superclass
# or A's class' superclass' superclass' superclass
     B ==      A.class.superclass.superclass.superclass
# ...</code></pre>
</div></section>

<section class="slide"><div>
  <h2>Assume A and B<br>are both Objects...</h2>
<pre><code class="ruby">
# =>      v Class
Object == Object.class
# =>      v Module
Object == Object.class.superclass
# =>      v Object
Object == Object.class.superclass.superclass
# or A's class' superclass' superclass' superclass
     B ==      A.class.superclass.superclass.superclass
# ...</code></pre>
</div></section>

<section class="slide"><div>
  <h2>Assume A and B<br>are both Objects...</h2>
<pre><code class="ruby">
# =>      v Class
Object == Object.class
# =>      v Module
Object == Object.class.superclass
# =>      v Object
Object == Object.class.superclass.superclass
# =>      v BasicObject
Object == Object.class.superclass.superclass.superclass
# ...</code></pre>
</div></section>

<section class="slide shout"><div>
  <h2>Smalltalk: <em>Everything</em> is an object</h2>
</div></section>

<section class="slide shout"><div>
  <h2>Ruby: Even Object is an Object itself</h2>
</div></section>

<section class="slide"><div>
  <h2>Today's Topics:</h2>
  <ul>
    <li>Type System</li>
    <ul>
      <li>Static Typing vs Dynamic Typing</li>
      <li>Strong or Weak? Coercion?</li>
    </ul>
    <li>Runtime System (object model)</li>
    <ul>
      <li>Object is an Object itself</li>
      <li><em>Singleton Pattern? Class?</em></li>
    </ul>
    <li><a href="https://github.com/godfat/muack">Muack</a> -- Yet Another Mocking Library</li>
  </ul>
</div></section>

<section class="slide"><div>
  <h2>Singleton Pattern</h2>
  <pre><code class="ruby">
require 'singleton'
class Mario
  include Singleton


  def greets
    puts "It's me, Mario!"
  end
end
Mario.instance.greets
</code></pre>
</div></section>

<section class="slide"><div>
  <h2>Singleton Pattern Underneath</h2>
  <pre><code class="ruby">
# (simplified)
class Mario
  def self.instance
    @instance ||= new
  end
  def greets
    puts "It's me, Mario!"
  end
end
Mario.instance.greets
</code></pre>
</div></section>

<section class="slide"><div>
  <h2>Singleton Pattern *Simplest*</h2>
  <pre><code class="ruby">

Mario = Object.new



  def Mario.greets
    puts "It's me, Mario!"
  end

Mario.greets
</code></pre>
</div></section>

<section class="slide"><div>
  <h2>Today's Topics:</h2>
  <ul>
    <li>Type System</li>
    <ul>
      <li>Static Typing vs Dynamic Typing</li>
      <li>Strong or Weak? Coercion?</li>
    </ul>
    <li>Runtime System (object model)</li>
    <ul>
      <li>Object is an Object itself</li>
      <li>Singleton Pattern? Class?</li>
    </ul>
    <li><a href="https://github.com/godfat/muack">Muack</a> <em>-- Yet Another Mocking Library</em></li>
  </ul>
</div></section>

<section class="slide shout"><div>
  <h2>Q?</h2>
</div></section>

  <div class="progress"><div></div></div>
  <script src='highlight.pack.js' type='text/javascript'></script>
  <script>hljs.initHighlightingOnLoad();</script>
  <script src="shower.min.js"></script>
</body>
</html>
